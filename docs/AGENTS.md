# docs — Starlight Documentation Site

Separate workspace (`@fro.bot/systematic-docs`, private). Starlight/Astro site deployed to GitHub Pages.

## Commands

```bash
bun run docs:generate   # Sync reference content from bundled assets (run first)
bun run docs:dev        # Local dev server
bun run docs:build      # Full build (runs generate + astro build)
bun run docs:preview    # Preview production build
```

`docs:generate` must run before `docs:build` — reference content is generated, not committed.

## Stack

- **Framework:** Starlight (`@astrojs/starlight@^0.37.6`) on Astro 5
- **Deploy:** GitHub Actions → GitHub Pages (`docs.yaml` workflow)
- **Site:** `https://fro.bot/systematic` (trailing slashes enabled)

## Structure

```
docs/
├── astro.config.mjs          # Site config (sidebar, social, base path)
├── scripts/
│   └── transform-content.ts  # Content generator (156 lines)
├── src/
│   ├── styles/custom.css     # Theme overrides
│   └── content/docs/
│       ├── index.mdx         # Landing page
│       ├── getting-started/  # 2 manual pages (installation, configuration)
│       ├── guides/           # 3 manual pages (architecture, conversion, creating-skills)
│       └── reference/        # Generated — DO NOT EDIT
│           ├── skills/       # 8 pages + index.mdx
│           ├── agents/       # 11 pages + index.mdx
│           └── commands/     # 9 pages + index.mdx
└── package.json
```

## Content Generation

`scripts/transform-content.ts` reads bundled assets from project root:

| Source | Pattern | Output |
|--------|---------|--------|
| `skills/*/SKILL.md` | `SKILL.md` files | `reference/skills/<slug>.md` |
| `agents/**/*.md` | All `.md` files | `reference/agents/<slug>.md` |
| `commands/**/*.md` | All `.md` files | `reference/commands/<slug>.md` |

Pipeline: `read file → parseFrontmatter → transformFrontmatter (name→title) → generatePage → write`

Each run cleans output dirs (preserves `index.mdx`) before regenerating. Slug collisions abort with error.

## Where to Look

| Task | Location |
|------|----------|
| Site config (sidebar, base path) | `astro.config.mjs` |
| Content generation script | `scripts/transform-content.ts` |
| Manual guides | `src/content/docs/guides/*.mdx` |
| Landing page | `src/content/docs/index.mdx` |
| Theme customization | `src/styles/custom.css` |
| Generated reference pages | `src/content/docs/reference/` (gitignored) |

## Notes

- Reference pages under `reference/` are gitignored — always regenerated from source
- `index.mdx` files in reference subdirs are manual (not generated, not cleaned)
- Script has its own `parseFrontmatter` (duplicates `src/lib/frontmatter.ts` logic)
- Frontmatter `name` → Starlight `title`, `description` gets HTML tags stripped
- Sidebar: Getting Started, Guides, Reference (Skills/Agents/Commands) — all autogenerated from dirs
